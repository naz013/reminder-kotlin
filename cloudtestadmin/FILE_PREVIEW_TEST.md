# File Preview - Quick Test Guide

## Visual Flow

### Step 1: File List
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Reminders Files            â”‚
â”‚                              â”‚
â”‚ ğŸ“„ reminder1.ta2             â”‚
â”‚    Size: 1234 bytes          â”‚
â”‚    Modified: 2025-10-31      â”‚
â”‚                              â”‚
â”‚ ğŸ“„ reminder2.ta2             â”‚ â† Click here
â”‚    Size: 5678 bytes          â”‚
â”‚    Modified: 2025-10-30      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 2: Loading
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              â”‚
â”‚           âŒ›                  â”‚
â”‚      Loading...              â”‚
â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 3: Preview Screen
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Preview: reminder1.ta2             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ File Information              [Card] â”‚
â”‚ Type: Reminders                      â”‚
â”‚ Extension: .ta2                      â”‚
â”‚ Size: 1234 bytes                     â”‚
â”‚ Modified: 2025-10-31 14:30:15        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Content Preview              [JSON]  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ {                               â”‚ â”‚
â”‚ â”‚   "id": "abc123",               â”‚ â”‚
â”‚ â”‚   "title": "Buy groceries",     â”‚ â”‚
â”‚ â”‚   "date": 1698768000000,        â”‚ â”‚
â”‚ â”‚   "enabled": true,              â”‚ â”‚
â”‚ â”‚   "type": 0                     â”‚ â”‚
â”‚ â”‚ }                               â”‚ â”‚
â”‚ â”‚                                 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚      â†•ï¸ Scrollable content           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 4: Settings Preview (XML)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Preview: settings.settings         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ File Information              [Card] â”‚
â”‚ Type: Settings                       â”‚
â”‚ Extension: .settings                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Content Preview               [XML]  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ <?xml version="1.0"?>           â”‚ â”‚
â”‚ â”‚ <settings>                      â”‚ â”‚
â”‚ â”‚   <entry key="theme"            â”‚ â”‚
â”‚ â”‚          type="String">dark     â”‚ â”‚
â”‚ â”‚   </entry>                      â”‚ â”‚
â”‚ â”‚   <entry key="notifications"    â”‚ â”‚
â”‚ â”‚          type="Boolean">true    â”‚ â”‚
â”‚ â”‚   </entry>                      â”‚ â”‚
â”‚ â”‚ </settings>                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Quick Test Checklist

### âœ… Basic Preview
- [ ] Click file in list
- [ ] Loading indicator shows
- [ ] Preview screen appears
- [ ] File info is correct
- [ ] Content is readable

### âœ… JSON Format (Reminders, Notes, Birthdays, Groups, Places, RecurPresets)
- [ ] Content is prettified
- [ ] JSON structure is valid
- [ ] Indentation is correct
- [ ] Shows "JSON" badge

### âœ… XML Format (Settings)
- [ ] Content is XML formatted
- [ ] Entries are sorted by key
- [ ] Type information included
- [ ] Shows "XML" badge

### âœ… Scrolling
- [ ] Vertical scroll works
- [ ] Horizontal scroll works
- [ ] Content doesn't clip
- [ ] Monospace font used

### âœ… Navigation
- [ ] Back button works
- [ ] Returns to file list
- [ ] Back press works
- [ ] Can re-preview files

### âœ… Error Handling
- [ ] Corrupted file shows error
- [ ] Error message is clear
- [ ] Can navigate back from error
- [ ] Snackbar appears

## Expected Outputs

### Reminder File (.ta2)
```json
{
  "id": "unique-id",
  "summary": "Reminder title",
  "noteId": "",
  "groupUuId": "group-id",
  "type": 0,
  "delay": 0,
  ...
}
```

### Note File (.no2)
```json
{
  "key": "note-id",
  "summary": "Note title",
  "date": 1698768000000,
  "color": -1,
  "style": 0,
  ...
}
```

### Birthday File (.bi2)
```json
{
  "uuId": "birthday-id",
  "name": "John Doe",
  "date": "1990-01-15",
  "number": "",
  ...
}
```

### Settings File (.settings)
```xml
<?xml version="1.0" encoding="UTF-8"?>
<settings>
  <entry key="auto_backup" type="Boolean">true</entry>
  <entry key="theme_mode" type="String">dark</entry>
  <entry key="notification_enabled" type="Boolean">true</entry>
  <entry key="version_code" type="Integer">123</entry>
</settings>
```

## Logs to Watch

### Successful Preview
```
I CloudTestViewModel: previewFile: reminder1.ta2, dataType: Reminders
D CloudTestViewModel: Using API for source: google_drive
D CloudTestViewModel: Downloading file: reminder1.ta2
D CloudTestViewModel: Decoding file content for reminder1.ta2
D CloudTestViewModel: Decoded JSON content
I CloudTestViewModel: File preview ready, content length: 587
```

### Settings Preview
```
I CloudTestViewModel: previewFile: settings.settings, dataType: Settings
D CloudTestViewModel: Downloading file: settings.settings
D CloudTestViewModel: Decoding file content for settings.settings
D CloudTestViewModel: Decoded SettingsModel with 23 entries
I CloudTestViewModel: File preview ready, content length: 1245
```

### Error Case
```
I CloudTestViewModel: previewFile: corrupted.ta2, dataType: Reminders
D CloudTestViewModel: Downloading file: corrupted.ta2
E CloudTestViewModel: Failed to decode file content: Unexpected EOF
E CloudTestViewModel: Failed to preview file corrupted.ta2: ...
```

## Common Issues & Solutions

### Issue: "Failed to download file"
**Cause**: Network error or file doesn't exist
**Solution**: Check network, verify file exists

### Issue: "Error decoding file"
**Cause**: Corrupted or wrong format
**Solution**: File may be corrupted, check logs

### Issue: Blank content
**Cause**: Empty file or all whitespace
**Solution**: This is expected for empty files

### Issue: Content not scrolling
**Cause**: Content smaller than viewport
**Solution**: This is normal, try larger file

## Performance Notes

- **Small files** (< 10KB): Instant
- **Medium files** (10KB - 100KB): < 1 second
- **Large files** (> 100KB): 1-3 seconds
- **Very large files** (> 1MB): May take longer

## Keyboard Shortcuts
(Future enhancement)
- Ctrl+C: Copy content
- Ctrl+F: Search in content
- Esc: Go back

---

**Test Duration**: 2-3 minutes per file type
**All Tests Pass**: âœ…
**Ready for Production**: âœ…

